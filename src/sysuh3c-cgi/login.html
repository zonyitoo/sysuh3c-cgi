<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SYSU H3C Login Page">
    <meta name="author" content="Y.T. CHUNG">
    <link rel="shortcut icon" href="/sysuh3c-cgi/static/img/favicon.png">

    <title>Login | SYSU H3C</title>

    <!-- Bootstrap core CSS -->
    <link href="/sysuh3c-cgi/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <link href="/sysuh3c-cgi/static/css/form.css" rel="stylesheet">
    <style>
      .form-login input[type="text"] {
        margin-bottom: -1px;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      .form-login input[type="password"] {
        margin-bottom: 10px;
        border-top-left-radius: 0;
        border-top-right-radius: 0;
      }
    </style>
    </head>

  <body>
    <div class="container">

      <div class="alert alert-danger" style="display:none;">
        <b>Oh snap!</b> Error!!
      </div>
      <form class="form-login" id="form_login">
        <h2 class="form-login-heading">Login</h2>
        <input id="form_netid" name="name" type="text" class="form-control" placeholder="NetID" autofocus>
        <input id="form_passwd" name="passwd" type="password" class="form-control" placeholder="Password">
        <button class="btn btn-lg btn-primary btn-block" type="submit" id="form_submit" data-loading-text="Please wait..." >Login</button>
      </form>

    </div> <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="/sysuh3c-cgi/static/js/jquery-2.0.3.min.js"></script>
    <script src="/sysuh3c-cgi/static/bootstrap/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {
        $(".alert").hide();
        $("#form_login").submit(function(e) {
          $("#form_submit").button('loading');
          $(".alert").hide();
          e.preventDefault();
          $.post('/cgi-bin/sysuh3c-login', $("#form_login").serialize(), function(data) {
            if (data.err) {
              $(".alert").show();
            }
            else {
              localStorage.netid = $("#form_netid").val();
              location.href = "/cgi-bin/sysuh3c.cgi";
            }
            $("#form_submit").button('reset');
          }).error(function() {
            $("#form_submit").button('reset');
          });
        });
      });
    </script>
    <!-- Placed at the end of the document so the pages load faster -->
  </body>
</html>
